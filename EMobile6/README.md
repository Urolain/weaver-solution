# EMobile6-solution
# 缺陷改进类

## 测试环境和正式环境消息互通

### 排查方案

```txt
1.检查测试环境mobileproperty表中rongAppUDIDNew值与正式环境要不一致,如果一致，清除测试环境该条记录；
2.检查测试环境EMobile4.properties配置文件的severUrl地址要指向测试环境EMobile服务；
3.检查测试环境openfilemodule.properties配置文件的配置指向测试环境私有云消息服务；（如果是公有云，本步骤跳过）
4.重启测试环境手机版服务。
```

### 原因描述

```
原因描述：
1.EMobile4.properties地址指向Mobile服务器，如果配错了，ecology里的流程信息就推错服务器。
2.消息服务一致的情况下，测试环境和正式环境的（消息连接参数）rongAppUDIDNew不能一致，否则消息服务无法判断用户已发生变更。
```

------



# 功能咨询类

## Android是否支持角标功能

> android系统没有角标功能，官方没有这个接口提供给应用使用， 国内一些手机有，是手机厂商自己做的。
> 华为系统：以前角标功能，只提供给微信、qq等知名软件使用，后来开放出来sdk,所有的应用都可以集成使用；emobile已集成发布，但是这边测试和客户使用的情况来看，
> 存在不稳定的现象（尤其是mate系列的手机）,这边已咨询华为开发者平台，目前没有给到有效的解决方案；
> 华为手机系统支持角标要求：EMUI4.1及以上，桌面版本：6.3.29 。
> 小米手机：只需要在手机推送设置中，打开角标开关即可，逻辑是小米手机实现，与app无关。
> 其他手机类似小米或者没有角标功能。
> 华为手机角标可用的情况下，也只有在app存活的情况下可以使用，app杀掉或者被系统回收的情况下，
> 通知提醒走的华为推送通道，华为推送现在使用了的通知栏推送，是一定没有角标的。
> 使用华为另一种推送，透传推送，华为手机角标可用的情况下可以由角标，但是推送到达率低，已经废弃使用了。

- 部分支持
- 兼容性、稳定性与应用本身无关。

## 考勤记录在哪里查看

> 普通考勤记录存入Ecology数据库HrmScheduleSign表中。
>
> 外出考勤记录存入Ecology数据库mobile_sign表中。

- 在app--->我(Tab页)--->考勤，可查看当天考勤签到/签退情况。
- 在移动考勤应用，可根据筛选条件，查看考勤记录。

## 通讯录同步机制

> 大部分客户因为服务端这边添加了缓存的原因，无法做到实时同步。
>
> 注意： 由于ecology服务端又存在人员缓存，如果恰巧同步的是原来缓存的数据，手机端就不会再去自动更新了，只能手动去同步。

- IOS在登录的时候会同步通讯录，在线状态下，每隔一个小时会检测一次人力资源更新情况来确定是否需要同步人力资源。
- Android在登录、或杀死后台进程后重进app界面时进行人力资源同步。